# ðŸ” å›¾åŒ¿ååŒ–æ”»å‡»ä¸Žé˜²å¾¡æ¼”ç¤ºç³»ç»Ÿ

> åŸºäºŽçœŸå®žç¤¾äº¤ç½‘ç»œçš„å›¾åŒ¿ååŒ–æ”»å‡»ã€å±žæ€§æŽ¨æ–­å’Œé˜²å¾¡æœºåˆ¶çš„å®Œæ•´å®žçŽ°ä¸Žäº¤äº’å¼æ¼”ç¤ºç³»ç»Ÿ


---

## ðŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ¼”ç¤ºç³»ç»Ÿ](#æ¼”ç¤ºç³»ç»Ÿ)
- [å®žéªŒè¿è¡Œ](#å®žéªŒè¿è¡Œ)
- [é¡¹ç›®ç»“æž„](#é¡¹ç›®ç»“æž„)
- [ç®—æ³•è¯´æ˜Ž](#ç®—æ³•è¯´æ˜Ž)
- [å®žéªŒç»“æžœ](#å®žéªŒç»“æžœ)
- [æ•°æ®é›†è¯¦ç»†è¯´æ˜Ž](#æ•°æ®é›†è¯¦ç»†è¯´æ˜Ž)
- [MGNé›†æˆè¯´æ˜Ž](#mgné›†æˆè¯´æ˜Ž)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ðŸŽ¯ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®å®žçŽ°äº†ä¸€ä¸ªå®Œæ•´çš„**å›¾åŒ¿ååŒ–æ”»å‡»ä¸Žé˜²å¾¡ç³»ç»Ÿ**ï¼ŒåŒ…å«ï¼š

- **13ç§æ”»å‡»å’Œé˜²å¾¡ç®—æ³•**çš„å®Œæ•´å®žçŽ°ï¼ˆåŒ…æ‹¬æœ€æ–°çš„MGNå›¾ç¥žç»ç½‘ç»œï¼‰
- **äº¤äº’å¼Webæ¼”ç¤ºç³»ç»Ÿ**ï¼Œå®žæ—¶å±•ç¤ºæ”»å‡»è¿‡ç¨‹
- **åŸºäºŽçœŸå®žæ•°æ®**çš„å®žéªŒè¯„ä¼°ï¼ˆFacebook Egoç½‘ç»œï¼‰
- **å®Œæ•´çš„å®žéªŒPipeline**ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–æ‰¹é‡å®žéªŒ

### ç ”ç©¶æ„ä¹‰

- ðŸ“Š **éšç§ä¿æŠ¤è¯„ä¼°**: é‡åŒ–è¯„ä¼°ç¤¾äº¤ç½‘ç»œåŒ¿ååŒ–çš„éšç§é£Žé™©
- ðŸ”¬ **ç®—æ³•å¯¹æ¯”**: ç³»ç»Ÿå¯¹æ¯”ä¸åŒæ”»å‡»å’Œé˜²å¾¡æ–¹æ³•çš„æ•ˆæžœ
- ðŸŽ“ **æ•™å­¦æ¼”ç¤º**: ç›´è§‚å±•ç¤ºå›¾åŒ¿ååŒ–çš„åŽŸç†å’Œè¿‡ç¨‹
- ðŸ›¡ï¸ **å®‰å…¨åŠ å›º**: ä¸ºç¤¾äº¤ç½‘ç»œå¹³å°æä¾›éšç§ä¿æŠ¤å»ºè®®

---

## âš¡ æ ¸å¿ƒåŠŸèƒ½

### 1. åŽ»åŒ¿ååŒ–æ”»å‡»ï¼ˆDeanonymizationï¼‰

| æ–¹æ³• | åŽŸç† | å‡†ç¡®çŽ‡ |
|------|------|--------|
| **è´ªå¿ƒç‰¹å¾åŒ¹é…** | åŸºäºŽèŠ‚ç‚¹åº¦æ•°çš„é€æ­¥åŒ¹é… | 33.6% |
| **åŒˆç‰™åˆ©ç®—æ³•** | å…¨å±€æœ€ä¼˜äºŒåˆ†å›¾åŒ¹é… | 30.0% |
| **å›¾æ ¸æ–¹æ³•** | Weisfeiler-Lehmanå­å›¾åŒ¹é… | 20.0% |
| **DeepWalkåµŒå…¥** | åŸºäºŽéšæœºæ¸¸èµ°çš„å›¾åµŒå…¥ | 30.0% |

### 2. å±žæ€§æŽ¨æ–­ï¼ˆAttribute Inferenceï¼‰

**ðŸ†• æ ¸å¿ƒåŠŸèƒ½**: æ”¯æŒä¸¤ç§æŽ¨æ–­ç›®æ ‡å¯¹æ¯”ï¼ˆCircles vs Featï¼‰

| æŽ¨æ–­ç›®æ ‡ | æ–¹æ³• | è¯´æ˜Ž | å‡†ç¡®çŽ‡ | éšç§é£Žé™© |
|----------|------|------|--------|----------|
| **Circles (ç¤¾äº¤åœˆ)** | é‚»å±…æŠ•ç¥¨ / æ ‡ç­¾ä¼ æ’­ / GraphSAGE / MGN | æŽ¨æ–­èŠ‚ç‚¹æ‰€å±žç¤¾äº¤åœˆ | 50-60% | ä½Žï¼ˆå­¦æœ¯ç ”ç©¶ï¼‰ |
| **ðŸ”¥ Feat (æ•æ„Ÿå±žæ€§)** | é‚»å±…æŠ•ç¥¨ / æ ‡ç­¾ä¼ æ’­ / MGN | æŽ¨æ–­æ€§åˆ«/å­¦æ ¡/é›‡ä¸»ç­‰ | 55-95% | ðŸ”¥ é«˜ï¼ˆçœŸå®žæ³„éœ²ï¼‰ |

**å…³é”®å‘çŽ°**:
- âœ… Featç‰¹å¾æŽ¨æ–­å‡†ç¡®çŽ‡é€šå¸¸é«˜äºŽCirclesï¼ˆæ›´å¼ºçš„åŒè´¨æ€§ï¼‰
- âœ… å³ä½¿éšè—70%æ ‡ç­¾ï¼Œä»èƒ½è¾¾åˆ°50%+å‡†ç¡®çŽ‡
- âœ… MGNï¼ˆæ¶ˆæ¯ä¼ é€’å›¾ç½‘ç»œï¼‰åœ¨ç®€å•äºŒåˆ†ç±»ä»»åŠ¡ä¸Šè¾¾åˆ°95%å‡†ç¡®çŽ‡
- âœ… è¯æ˜Žä»…åŒ¿ååŒ–å›¾ç»“æž„ä¸è¶³ä»¥ä¿æŠ¤æ•æ„Ÿå±žæ€§

### 3. é˜²å¾¡æœºåˆ¶ï¼ˆDefenseï¼‰

| æ–¹æ³• | åŽŸç† | éšç§å¢žå¼º |
|------|------|----------|
| **å·®åˆ†éšç§** | Laplaceæœºåˆ¶è¾¹æ‰°åŠ¨ | Îµ=0.5: -16.6% |
| **k-åŒ¿ååŒ–** | åº¦æ•°åºåˆ—åŒ¿ååŒ– | k=3: -13.6% |
| **å™ªå£°æ³¨å…¥** | è™šå‡èŠ‚ç‚¹å’Œè¾¹æ³¨å…¥ | 10%å™ªå£°: -8.6% |

---

## ðŸ› ï¸ æŠ€æœ¯æ ˆ

### åŽç«¯
- **Python 3.8+**
- **NetworkX**: å›¾å¤„ç†å’Œç®—æ³•
- **NumPy/Scikit-learn**: æ•°å€¼è®¡ç®—å’Œæœºå™¨å­¦ä¹ 
- **PyTorch**: å›¾ç¥žç»ç½‘ç»œï¼ˆGraphSAGE, MGNï¼‰
- **PyTorch Geometric**: å›¾ç¥žç»ç½‘ç»œåº“ï¼ˆMGNæ¨¡åž‹ï¼‰
- **Gensim**: å›¾åµŒå…¥ï¼ˆDeepWalkï¼‰

### å‰ç«¯
- **HTML5 + CSS3 + JavaScript**
- **D3.js v7**: äº¤äº’å¼åŠ›å¯¼å‘å›¾å¯è§†åŒ–
- **å“åº”å¼è®¾è®¡**: æ”¯æŒä¸åŒå±å¹•å°ºå¯¸

### æ•°æ®é›†
- **Facebook Egoç½‘ç»œ**: çœŸå®žç¤¾äº¤ç½‘ç»œï¼ˆ10ä¸ªegoç½‘ç»œï¼‰
- **Coraå¼•ç”¨ç½‘ç»œ**: å­¦æœ¯è®ºæ–‡å¼•ç”¨å›¾ï¼ˆ2708èŠ‚ç‚¹ï¼‰

---

---

## ðŸ†• Featæ•æ„Ÿå±žæ€§æŽ¨æ–­åŠŸèƒ½

### åŠŸèƒ½è¯´æ˜Ž

ç³»ç»ŸçŽ°åœ¨æ”¯æŒä¸¤ç§å±žæ€§æŽ¨æ–­ç›®æ ‡ï¼š

1. **CirclesæŽ¨æ–­**ï¼ˆåŽŸæœ‰ï¼‰ï¼šä½¿ç”¨`.circles`æ–‡ä»¶ä¸­çš„ç¤¾äº¤åœˆæ ‡ç­¾
2. **FeatæŽ¨æ–­**ï¼ˆæ–°å¢žï¼‰ï¼šä½¿ç”¨`.feat`æ–‡ä»¶ä¸­çš„æ•æ„Ÿå±žæ€§ï¼ˆæ€§åˆ«ã€å­¦æ ¡ã€é›‡ä¸»ç­‰ï¼‰

**è‡ªåŠ¨é›†æˆ**ï¼šåœ¨è¿è¡Œ`main_experiment_unified.py`æ—¶ï¼Œå¦‚æžœæ£€æµ‹åˆ°Facebook Egoç½‘ç»œï¼Œä¼šè‡ªåŠ¨ï¼š
- âœ… æå–Circlesæ ‡ç­¾è¿›è¡ŒæŽ¨æ–­
- âœ… æå–Featç‰¹å¾è¿›è¡ŒæŽ¨æ–­
- âœ… åœ¨ç»“æžœä¸­åŒæ—¶è®°å½•ä¸¤ç§æŽ¨æ–­çš„å‡†ç¡®çŽ‡
- âœ… å¯è§†åŒ–æ—¶å¯¹æ¯”æ˜¾ç¤ºä¸¤ç§ç»“æžœ

### ä½¿ç”¨ç¤ºä¾‹

```bash
# è¿è¡Œå®Œæ•´å®žéªŒï¼ˆè‡ªåŠ¨åŒ…å«Circleså’ŒFeatæŽ¨æ–­ï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode all --save

# åªè¿è¡Œå±žæ€§æŽ¨æ–­é˜¶æ®µ
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode attribute_inference --save
```

### è¾“å‡ºç»“æžœ

åœ¨ç”Ÿæˆçš„JSONæ–‡ä»¶ä¸­ï¼Œ`attribute_inference`å­—æ®µåŒ…å«ï¼š
```json
{
  "attribute_inference": [
    {
      "hide_ratio": 0.3,
      "method": "Neighbor-Voting",
      "label_type": "Circles",  // æˆ– "Feat"
      "accuracy": 0.6024,
      "random_baseline": 0.0435
    },
    ...
  ]
}
```

å¯è§†åŒ–å›¾è¡¨ä¼šè‡ªåŠ¨å¯¹æ¯”æ˜¾ç¤ºCircleså’ŒFeatä¸¤ç§æŽ¨æ–­ç»“æžœã€‚

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. çŽ¯å¢ƒé…ç½®

```bash
# å…‹éš†é¡¹ç›®ï¼ˆæˆ–è¿›å…¥é¡¹ç›®ç›®å½•ï¼‰
cd /home/honglianglu/hdd/Anonymous

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. æŸ¥çœ‹äº¤äº’å¼æ¼”ç¤ºï¼ˆæŽ¨èï¼ï¼‰

```bash
# å¯åŠ¨HTTPæœåŠ¡å™¨
cd results
python3 -m http.server 9000

# åœ¨æµè§ˆå™¨è®¿é—®
# http://localhost:9000/animated_attack_demo.html
```

### 3. è¿è¡Œå®žéªŒ

```bash
# è¿è¡Œå®Œæ•´å®žéªŒï¼ˆåŒ…å«æ‰€æœ‰4ä¸ªé˜¶æ®µï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode all --save

# ç»“æžœä¿å­˜åœ¨ results/unified/ ç›®å½•
# å¯è§†åŒ–å›¾è¡¨ä¿å­˜åœ¨ results/figures/ ç›®å½•
```

### 4. å¯è§†åŒ–ç»“æžœ

```bash
# å¯è§†åŒ–æœ€æ–°ç»“æžœ
python3 visualize_unified_auto.py --latest

# å¯è§†åŒ–æŒ‡å®šæ•°æ®é›†
python3 visualize_unified_auto.py --dataset facebook_ego --ego_id 0

# æ‰¹é‡å¯è§†åŒ–æ‰€æœ‰ç»“æžœ
python3 visualize_all_unified.py
```

---

## ðŸŽ¬ æ¼”ç¤ºç³»ç»Ÿ

### ä¸»æ¼”ç¤ºé¡µé¢ï¼š`animated_attack_demo.html`

#### âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ðŸŽ¯ 13ç§æ–¹æ³•åŠ¨ç”»æ¼”ç¤º**: å®Œæ•´å±•ç¤ºæ”»å‡»å’Œé˜²å¾¡è¿‡ç¨‹ï¼ˆåŒ…æ‹¬MGNï¼‰
- **ðŸŽ¨ èŠ‚ç‚¹é¢œè‰²ç¼–ç **: 
  - ðŸ”´ çº¢è‰² = å±žæ€§A
  - ðŸ”µ è“è‰² = å±žæ€§B  
  - ðŸŸ¢ ç»¿è‰² = å±žæ€§C
  - âš« ç°è‰² = æœªçŸ¥å±žæ€§
- **âš¡ å®žæ—¶é«˜äº®**: 
  - ðŸŸ  æ©™è‰²è¾¹æ¡† = å½“å‰æ“ä½œèŠ‚ç‚¹
  - ðŸŸ¢ ç»¿è‰²è¾¹æ¡† = åŒ¹é…æˆåŠŸ
  - ðŸ”´ çº¢è‰²è¾¹æ¡† = åŒ¹é…å¤±è´¥
- **ðŸ›¤ï¸ è·¯å¾„è¿½è¸ª**: å¯è§†åŒ–DeepWalkéšæœºæ¸¸èµ°è·¯å¾„
- **ðŸ”— é‚»å±…å…³ç³»**: åŠ¨æ€æ˜¾ç¤ºèŠ‚ç‚¹é‚»å±…å’Œè¿žæŽ¥è¾¹

#### ðŸ“Š æ¼”ç¤ºå†…å®¹

**é˜¶æ®µ1ï¼šåŽ»åŒ¿ååŒ–æ”»å‡»**
1. è´ªå¿ƒç‰¹å¾åŒ¹é… - é€æ­¥åŒ¹é…æ¼”ç¤º
2. åŒˆç‰™åˆ©ç®—æ³• - å…¨å±€æœ€ä¼˜åŒ¹é…
3. å›¾æ ¸æ–¹æ³• - å­å›¾ç»“æž„æ¯”è¾ƒ
4. DeepWalkåµŒå…¥ - éšæœºæ¸¸èµ°è·¯å¾„

**é˜¶æ®µ2ï¼šå±žæ€§æŽ¨æ–­**
5. é‚»å±…æŠ•ç¥¨ - åŸºäºŽé‚»å±…å±žæ€§æŽ¨æ–­
6. æ ‡ç­¾ä¼ æ’­ - è¿­ä»£æ‰©æ•£æ ‡ç­¾
7. GraphSAGE - å›¾ç¥žç»ç½‘ç»œèšåˆ
8. MGN - æ¶ˆæ¯ä¼ é€’å›¾ç½‘ç»œ

**é˜¶æ®µ3ï¼šé˜²å¾¡æœºåˆ¶**
9. å·®åˆ†éšç§ - è¾¹æ‰°åŠ¨æ¼”ç¤º
10. k-åŒ¿ååŒ– - åº¦æ•°åˆ†ç»„
11. å™ªå£°æ³¨å…¥ - è™šå‡èŠ‚ç‚¹å’Œè¾¹

#### ðŸŽ® ä½¿ç”¨æ–¹æ³•

1. **é€‰æ‹©æ¼”ç¤ºæ–¹æ³•**: å·¦ä¾§é€‰æ‹©"é˜¶æ®µ1/2/3"ï¼Œå†é€‰æ‹©å…·ä½“æ–¹æ³•
2. **å¼€å§‹æ¼”ç¤º**: ç‚¹å‡»"â–¶ï¸ å¼€å§‹æ¼”ç¤º"æŒ‰é’®
3. **è§‚å¯ŸåŠ¨ç”»**: 
   - èŠ‚ç‚¹å’Œè¾¹ä¼šå®žæ—¶é«˜äº®
   - å³ä¸Šè§’æ˜¾ç¤ºé¢œè‰²å›¾ä¾‹
   - åº•éƒ¨æ˜¾ç¤ºå½“å‰æ­¥éª¤è¯´æ˜Ž
4. **æš‚åœ/ç»§ç»­**: ç‚¹å‡»"â¸ æš‚åœ"æŒ‰é’®
5. **é‡ç½®**: ç‚¹å‡»"ðŸ”„ é‡ç½®"è¿”å›žåˆå§‹çŠ¶æ€

#### ðŸ“¸ æˆªå›¾å±•ç¤º

æ¼”ç¤ºç³»ç»Ÿç‰¹ç‚¹ï¼š
- æ¸…æ™°çš„ä¸‰é˜¶æ®µå¯¼èˆª
- å®žæ—¶åŠ¨ç”»æ•ˆæžœ
- è¯¦ç»†çš„çŠ¶æ€ä¿¡æ¯
- å“åº”å¼å¸ƒå±€

### æµ‹è¯•é¡µé¢ï¼š`test_highlight.html`

ç”¨äºŽéªŒè¯é«˜äº®æ•ˆæžœæ˜¯å¦æ­£å¸¸å·¥ä½œï¼š
```bash
# è®¿é—® http://localhost:9000/test_highlight.html
# ç‚¹å‡»"æµ‹è¯•èŠ‚ç‚¹é«˜äº®"å’Œ"æµ‹è¯•è¾¹é«˜äº®"æŒ‰é’®
```

---

## ðŸ”¬ å®žéªŒè¿è¡Œ

### ç»Ÿä¸€å®žéªŒè„šæœ¬ï¼š`main_experiment_unified.py`

#### æ”¯æŒçš„æ•°æ®é›†

æœ¬ç³»ç»Ÿæ”¯æŒä¸¤ç§æ•°æ®é›†çš„å®Œæ•´æµ‹è¯•ï¼š

| æ•°æ®é›† | èŠ‚ç‚¹æ•° | è¾¹æ•° | ç‰¹ç‚¹ | ä½¿ç”¨åœºæ™¯ |
|--------|--------|------|------|----------|
| **Facebook Ego** | 50-4000+ | æ•°ç™¾-æ•°ä¸‡ | çœŸå®žç¤¾äº¤ç½‘ç»œ | ç¤¾äº¤ç½‘ç»œéšç§è¯„ä¼° |
| **Cora** | 2708 | 5429 | å­¦æœ¯å¼•ç”¨ç½‘ç»œ | å›¾ç¥žç»ç½‘ç»œç ”ç©¶ |

---

### ðŸ“Š å®žéªŒæ¨¡å¼è¯´æ˜Ž

`main_experiment_unified.py`æ”¯æŒå¤šç§å®žéªŒæ¨¡å¼ï¼š

| æ¨¡å¼ | åŒ…å«é˜¶æ®µ | ç”Ÿæˆå›¾è¡¨æ•° | è¿è¡Œæ—¶é—´ | ä½¿ç”¨åœºæ™¯ |
|------|---------|-----------|----------|---------|
| **all** | å…¨éƒ¨4ä¸ªé˜¶æ®µ | 8-10å¼  | ~15-20åˆ†é’Ÿ | å®Œæ•´å®žéªŒï¼ˆæŽ¨èï¼‰ |
| **attack** | ä»…åŽ»åŒ¿ååŒ– | 4å¼  | ~5åˆ†é’Ÿ | å¿«é€Ÿæµ‹è¯•æ”»å‡» |
| **attribute_inference** | ä»…å±žæ€§æŽ¨æ–­ | 1å¼  | ~3åˆ†é’Ÿ | å•ç‹¬æµ‹è¯•æŽ¨æ–­ |
| **robustness** | ä»…é²æ£’æ€§ | 1å¼  | ~8åˆ†é’Ÿ | å•ç‹¬æµ‹è¯•é²æ£’æ€§ |
| **defense** | ä»…é˜²å¾¡ | 1-2å¼  | ~10åˆ†é’Ÿ | å•ç‹¬æµ‹è¯•é˜²å¾¡ |
| **quick** | ç®€åŒ–ç‰ˆ | 2-3å¼  | ~2åˆ†é’Ÿ | å¿«é€Ÿé¢„è§ˆ |

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# å®Œæ•´å®žéªŒï¼ˆæŽ¨èï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode all --save

# åªæµ‹è¯•åŽ»åŒ¿ååŒ–æ”»å‡»
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode attack --save

# åªæµ‹è¯•å±žæ€§æŽ¨æ–­ï¼ˆåŒ…å«Circleså’ŒFeatï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode attribute_inference --save

# å¿«é€Ÿæµ‹è¯•
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 698 --mode quick
```

### ðŸ“Š æµ‹è¯•æ–¹æ³•

#### 1. Facebook Egoç½‘ç»œæµ‹è¯•

**âš ï¸ é‡è¦**: å¿…é¡»ä½¿ç”¨æ ‡å‡†Egoç½‘ç»œIDï¼Œå¦åˆ™å¯èƒ½åŠ è½½é”™è¯¯æ•°æ®ï¼

##### æ ‡å‡†Egoç½‘ç»œIDåˆ—è¡¨

| Ego ID | èŠ‚ç‚¹æ•° | è¾¹æ•° | ç‰¹ç‚¹ | æŽ¨èç”¨é€” |
|--------|--------|------|------|----------|
| **0** | 333 | 2519 | ä¸­ç­‰è§„æ¨¡ | â­ é»˜è®¤æ¼”ç¤ºï¼ˆæŽ¨èï¼‰ |
| **107** | 1034 | 26749 | å¤§è§„æ¨¡ç½‘ç»œ | å¤§è§„æ¨¡æµ‹è¯• |
| **348** | 224 | 6384 | ç¨ å¯†ç½‘ç»œ | ç¨ å¯†ç½‘ç»œæµ‹è¯• |
| **414** | 150 | 3386 | å°è§„æ¨¡ç½‘ç»œ | ä¸­å°è§„æ¨¡æµ‹è¯• |
| **686** | 168 | 3312 | å°è§„æ¨¡ç½‘ç»œ | ä¸­å°è§„æ¨¡æµ‹è¯• |
| **698** | 65 | 1134 | æœ€å°ç½‘ç»œ | â­ å¿«é€Ÿæµ‹è¯• |
| **1684** | 786 | 28048 | è¶…å¤§è§„æ¨¡ç½‘ç»œ | è¶…å¤§è§„æ¨¡æµ‹è¯• |
| **1912** | 747 | 60050 | è¶…ç¨ å¯†ç½‘ç»œ | â­ è¶…ç¨ å¯†ç½‘ç»œæµ‹è¯• |
| **3437** | 534 | 9726 | ä¸­ç­‰è§„æ¨¡ç½‘ç»œ | ä¸­ç­‰è§„æ¨¡æµ‹è¯• |
| **3980** | 52 | 292 | æœ€å°ç½‘ç»œ | â­ æœ€å°ç½‘ç»œæµ‹è¯• |

**æ³¨æ„**: åªæœ‰è¿™10ä¸ªæ ‡å‡†IDæœ‰å®Œæ•´çš„å±žæ€§æ•°æ®ï¼ˆ`.feat`ã€`.circles`æ–‡ä»¶ï¼‰ã€‚ä½¿ç”¨å…¶ä»–IDå¯èƒ½å¯¼è‡´ï¼š
- âŒ åŠ è½½å¤±è´¥ï¼Œå›žé€€åˆ°Combinedæ•°æ®
- âŒ ç¼ºå°‘å±žæ€§æ•°æ®ï¼Œæ— æ³•è¿›è¡Œå±žæ€§æŽ¨æ–­
- âŒ ç”Ÿæˆçš„å›¾è¡¨ä¸å®Œæ•´

##### åŸºæœ¬æµ‹è¯•å‘½ä»¤

```bash
# å®Œæ•´å®žéªŒï¼ˆæŽ¨èï¼ŒåŒ…å«æ‰€æœ‰é˜¶æ®µï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode all --save

# å¿«é€Ÿæµ‹è¯•ï¼ˆå°ç½‘ç»œï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 698 --mode all --save

# å¤§è§„æ¨¡æµ‹è¯•
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 107 --mode all --save

# è¶…å¤§è§„æ¨¡æµ‹è¯•ï¼ˆè€—æ—¶è¾ƒé•¿ï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 1912 --mode all --save
```

##### å®Œæ•´å‚æ•°è¯´æ˜Ž

```bash
python3 main_experiment_unified.py \
    --dataset facebook_ego \           # æ•°æ®é›†ï¼šfacebook_ego æˆ– cora
    --ego_id 0 \                       # Egoç½‘ç»œIDï¼ˆä»…facebook_egoéœ€è¦ï¼‰
    --mode all \                       # å®žéªŒæ¨¡å¼ï¼šall/attack/attribute_inference/robustness/defense/quick
    --save \                           # ä¿å­˜ç»“æžœåˆ°JSONæ–‡ä»¶
    --output results/unified           # è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šresults/unifiedï¼‰
    --force_recompute                  # å¼ºåˆ¶é‡æ–°è®¡ç®—ï¼ˆå³ä½¿ç»“æžœå·²å­˜åœ¨ï¼‰
```

**å‚æ•°è¯´æ˜Ž**:
- `--dataset`: æ•°æ®é›†åç§°ï¼Œæ”¯æŒ `facebook_ego`ã€`cora`ã€`facebook`ï¼ˆCombinedï¼‰
- `--ego_id`: ä»…å½“`--dataset facebook_ego`æ—¶éœ€è¦ï¼Œå¿…é¡»æ˜¯æ ‡å‡†IDï¼ˆ0, 107, 348, 414, 686, 698, 1684, 1912, 3437, 3980ï¼‰
- `--mode`: å®žéªŒæ¨¡å¼ï¼Œ`all`åŒ…å«æ‰€æœ‰4ä¸ªé˜¶æ®µ
- `--save`: ä¿å­˜ç»“æžœåˆ°JSONæ–‡ä»¶ï¼ˆé»˜è®¤ä¸ä¿å­˜ï¼‰

##### è¾“å‡ºæ–‡ä»¶ç»“æž„

```
results/
â”œâ”€â”€ unified/                                    # JSONç»“æžœæ–‡ä»¶
â”‚   â”œâ”€â”€ facebook_ego_ego0_20260103_120000.json
â”‚   â”œâ”€â”€ cora_20260103_120000.json
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ figures/                                    # å¯è§†åŒ–å›¾è¡¨
    â”œâ”€â”€ facebook_ego_ego0_deanonymization.png      # Chart 1: åŽ»åŒ¿ååŒ–æ”»å‡»
    â”œâ”€â”€ facebook_ego_ego0_attribute_inference.png  # Chart 2: å±žæ€§æŽ¨æ–­ï¼ˆCircles+Featï¼‰
    â”œâ”€â”€ facebook_ego_ego0_robustness.png           # Chart 3: é²æ£’æ€§æµ‹è¯•
    â”œâ”€â”€ facebook_ego_ego0_defense.png              # Chart 4: é˜²å¾¡æ•ˆæžœ
    â”œâ”€â”€ facebook_ego_ego0_comprehensive.png        # Chart 5: ç»¼åˆåˆ†æž
    â”œâ”€â”€ facebook_ego_ego0_attack_heatmap.png       # Chart 6: æ”»å‡»çƒ­åŠ›å›¾
    â”œâ”€â”€ facebook_ego_ego0_privacy_utility_tradeoff.png  # Chart 7: éšç§-æ•ˆç”¨æƒè¡¡
    â”œâ”€â”€ facebook_ego_ego0_method_ranking.png       # Chart 8: æ–¹æ³•æŽ’å
    â””â”€â”€ facebook_ego_ego0_report.txt               # æ–‡æœ¬æŠ¥å‘Š
```

**æ³¨æ„**: 
- Facebook Egoç½‘ç»œä¼šç”Ÿæˆ8-10å¼ å›¾è¡¨ï¼ˆåŒ…å«Circleså’ŒFeatå¯¹æ¯”ï¼‰
- Coraæ•°æ®é›†ä¼šç”Ÿæˆ8-10å¼ å›¾è¡¨ï¼ˆåŒ…å«å®Œæ•´å±žæ€§æŽ¨æ–­ï¼‰
- Facebook Combinedåªç”Ÿæˆ7å¼ å›¾è¡¨ï¼ˆç¼ºå°‘å±žæ€§æŽ¨æ–­ï¼Œå› ä¸ºæ²¡æœ‰èŠ‚ç‚¹å±žæ€§ï¼‰

---

#### 2. Coraæ•°æ®é›†æµ‹è¯•

Coraæ˜¯ä¸€ä¸ªå­¦æœ¯è®ºæ–‡å¼•ç”¨ç½‘ç»œï¼ŒåŒ…å«7ä¸ªç±»åˆ«çš„è®ºæ–‡ï¼Œ**æœ‰å®Œæ•´çš„èŠ‚ç‚¹æ ‡ç­¾**ã€‚

##### æ•°æ®é›†ç‰¹ç‚¹

- **èŠ‚ç‚¹**: 2708ç¯‡è®ºæ–‡
- **è¾¹**: 5429æ¡å¼•ç”¨å…³ç³»
- **ç‰¹å¾**: 1433ç»´è¯è¢‹å‘é‡
- **ç±»åˆ«**: 7ä¸ªç ”ç©¶é¢†åŸŸ
  - Case_Based, Genetic_Algorithms, Neural_Networks
  - Probabilistic_Methods, Reinforcement_Learning
  - Rule_Learning, Theory

##### åŸºæœ¬æµ‹è¯•å‘½ä»¤

```bash
# è¿è¡ŒCoraæ•°æ®é›†å®Œæ•´å®žéªŒï¼ˆæŽ¨èï¼‰
python3 main_experiment_unified.py --dataset cora --mode all --save

# åªæµ‹è¯•å±žæ€§æŽ¨æ–­
python3 main_experiment_unified.py --dataset cora --mode attribute_inference --save

# å¿«é€Ÿæµ‹è¯•
python3 main_experiment_unified.py --dataset cora --mode quick
```

**æ³¨æ„**: Coraæ•°æ®é›†ä¼šç”Ÿæˆå®Œæ•´çš„8-10å¼ å›¾è¡¨ï¼ŒåŒ…æ‹¬å±žæ€§æŽ¨æ–­ï¼ˆä½¿ç”¨è®ºæ–‡ç±»åˆ«ä½œä¸ºæ ‡ç­¾ï¼‰ã€‚

---

### ðŸ”„ æ‰¹é‡æµ‹è¯•

å¦‚æžœéœ€è¦æµ‹è¯•å¤šä¸ªæ•°æ®é›†æˆ–å‚æ•°ç»„åˆï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ï¼š

```bash
# åˆ›å»ºæ‰¹é‡æµ‹è¯•è„šæœ¬
cat > batch_test.sh << 'EOF'
#!/bin/bash

echo "å¼€å§‹æ‰¹é‡æµ‹è¯•..."

# æµ‹è¯•ä¸åŒçš„Facebook Egoç½‘ç»œ
for ego_id in 0 698 3980 414; do
    echo "æµ‹è¯• ego_id=$ego_id"
    python3 main_experiment_unified.py --dataset facebook_ego --ego_id $ego_id
done

# æµ‹è¯•Coraæ•°æ®é›†
echo "æµ‹è¯• Coraæ•°æ®é›†"
python3 main_experiment_unified.py --dataset cora

# æµ‹è¯•ä¸åŒé˜²å¾¡å‚æ•°
for epsilon in 0.5 1.0 2.0; do
    echo "æµ‹è¯• epsilon=$epsilon"
    python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --defense_epsilon $epsilon
done

echo "æ‰¹é‡æµ‹è¯•å®Œæˆï¼"
EOF

# æ‰§è¡Œæ‰¹é‡æµ‹è¯•
chmod +x batch_test.sh
./batch_test.sh
```

---

### â±ï¸ é¢„è®¡è¿è¡Œæ—¶é—´

| æ•°æ®é›† | èŠ‚ç‚¹æ•° | é¢„è®¡æ—¶é—´ | å†…å­˜å ç”¨ |
|--------|--------|----------|----------|
| Facebook Ego (0) | 333 | ~2åˆ†é’Ÿ | <500MB |
| Facebook Ego (698) | 65 | ~30ç§’ | <200MB |
| Facebook Ego (107) | 1034+ | ~10åˆ†é’Ÿ | ~1GB |
| Cora | 2708 | ~5åˆ†é’Ÿ | ~800MB |

**æ³¨æ„**: GraphSAGEè®­ç»ƒä¼šå ç”¨å¤§éƒ¨åˆ†æ—¶é—´ï¼Œå¯ä»¥é€šè¿‡å‡å°‘è®­ç»ƒè½®æ•°æ¥åŠ é€Ÿã€‚

---

### ðŸ“ˆ å¯è§†åŒ–ç»“æžœ

#### è‡ªåŠ¨å¯è§†åŒ–

è¿è¡Œå®žéªŒåŽï¼Œä½¿ç”¨å¯è§†åŒ–è„šæœ¬ç”Ÿæˆå›¾è¡¨ï¼š

```bash
# å¯è§†åŒ–æœ€æ–°ç»“æžœï¼ˆæŽ¨èï¼‰
python3 visualize_unified_auto.py --latest

# å¯è§†åŒ–æŒ‡å®šæ•°æ®é›†
python3 visualize_unified_auto.py --dataset facebook_ego --ego_id 0

# æ‰¹é‡å¯è§†åŒ–æ‰€æœ‰ç»“æžœ
python3 visualize_all_unified.py
```

#### ç”Ÿæˆçš„å›¾è¡¨è¯´æ˜Ž

| å›¾è¡¨ç¼–å· | æ–‡ä»¶å | è¯´æ˜Ž |
|---------|--------|------|
| Chart 1 | `*_deanonymization.png` | åŽ»åŒ¿ååŒ–æ”»å‡»æ€§èƒ½å¯¹æ¯” |
| Chart 2 | `*_attribute_inference.png` | å±žæ€§æŽ¨æ–­ç»“æžœï¼ˆCircles+Featå¯¹æ¯”ï¼‰ |
| Chart 3 | `*_robustness.png` | é²æ£’æ€§æµ‹è¯•æ›²çº¿ |
| Chart 4 | `*_defense.png` | é˜²å¾¡æ•ˆæžœå¯¹æ¯” |
| Chart 5 | `*_comprehensive.png` | ç»¼åˆåˆ†æžï¼ˆé›·è¾¾å›¾+å¤šæŒ‡æ ‡ï¼‰ |
| Chart 6 | `*_attack_heatmap.png` | æ”»å‡»æˆåŠŸçŽ‡çƒ­åŠ›å›¾ |
| Chart 7 | `*_privacy_utility_tradeoff.png` | éšç§-æ•ˆç”¨æƒè¡¡æ›²çº¿ |
| Chart 8 | `*_method_ranking.png` | æ–¹æ³•æŽ’åå¯¹æ¯” |
| - | `*_report.txt` | è¯¦ç»†æ–‡æœ¬æŠ¥å‘Š |

#### æŸ¥çœ‹ç”Ÿæˆçš„å›¾è¡¨

```bash
# æ‰“å¼€figuresç›®å½•
cd results/figures

# æŸ¥çœ‹æ‰€æœ‰ç”Ÿæˆçš„PNGå›¾è¡¨
ls -lh *.png

# åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼ˆå¦‚æžœæœ‰HTMLæŠ¥å‘Šï¼‰
python3 -m http.server 8000
# è®¿é—®: http://localhost:8000/
```

#### æ–¹æ³•2ï¼šæŸ¥çœ‹JSONç»“æžœæ–‡ä»¶

```bash
# æŸ¥çœ‹JSONæ ¼å¼çš„è¯¦ç»†ç»“æžœ
cat results/unified/facebook_ego_ego0_*.json | python3 -m json.tool | less

# æå–ç‰¹å®šæŒ‡æ ‡
python3 << 'EOF'
import json
import glob

# è¯»å–æœ€æ–°çš„ç»“æžœæ–‡ä»¶
files = glob.glob("results/unified/*.json")
latest = max(files, key=lambda f: f.split("_")[-1])

with open(latest) as f:
    data = json.load(f)
    
print("åŽ»åŒ¿ååŒ–å‡†ç¡®çŽ‡:")
for method, acc in data['deanonymization'].items():
    print(f"  {method}: {acc['accuracy']:.2%}")
    
print("\nå±žæ€§æŽ¨æ–­å‡†ç¡®çŽ‡:")
for method, acc in data['attribute_inference'].items():
    print(f"  {method}: {acc['accuracy']:.2%}")
EOF
```

#### æ–¹æ³•3ï¼šæŸ¥çœ‹æ–‡æœ¬æŠ¥å‘Š

```bash
# æŸ¥çœ‹ç”Ÿæˆçš„æ–‡æœ¬æŠ¥å‘Š
cat results/figures/*_report.txt
```

### ðŸ“ ç”Ÿæˆæ¼”ç¤ºæ•°æ®ï¼š`generate_real_demo_data.py`

æ­¤è„šæœ¬ç”¨äºŽç”ŸæˆWebæ¼”ç¤ºé¡µé¢æ‰€éœ€çš„JSONæ•°æ®æ–‡ä»¶ã€‚

#### åŸºæœ¬ç”¨æ³•

```bash
# ä½¿ç”¨é»˜è®¤å‚æ•°ç”Ÿæˆæ¼”ç¤ºæ•°æ®ï¼ˆego_id=0ï¼Œ50èŠ‚ç‚¹ï¼‰
python3 generate_real_demo_data.py

# è¾“å‡º: results/real_data_demo.json
```

#### æŒ‡å®šä¸åŒçš„Egoç½‘ç»œ

```bash
# ä½¿ç”¨ego_id=698ç”Ÿæˆï¼ˆæœ€å°ç½‘ç»œï¼Œ65èŠ‚ç‚¹ï¼‰
python3 generate_real_demo_data.py --ego_id 698

# ä½¿ç”¨ego_id=414ç”Ÿæˆï¼ˆ150èŠ‚ç‚¹ï¼‰
python3 generate_real_demo_data.py --ego_id 414

# ä½¿ç”¨ego_id=107ç”Ÿæˆï¼ˆå¤§è§„æ¨¡ç½‘ç»œï¼Œ1000+èŠ‚ç‚¹ï¼Œè¾ƒæ…¢ï¼‰
python3 generate_real_demo_data.py --ego_id 107
```

#### è°ƒæ•´æ¼”ç¤ºå‚æ•°

```bash
# æŒ‡å®šè¾“å‡ºæ–‡ä»¶å
python3 generate_real_demo_data.py --output results/my_demo.json

# è°ƒæ•´ç§å­èŠ‚ç‚¹æ•°é‡ï¼ˆå½±å“åŒ¹é…æ¼”ç¤ºï¼‰
python3 generate_real_demo_data.py --num_seeds 10

# ç”Ÿæˆè¾ƒå¤§çš„æ¼”ç¤ºå›¾ï¼ˆæ³¨æ„ï¼šå¤ªå¤§å¯èƒ½å¯¼è‡´æµè§ˆå™¨å¡é¡¿ï¼‰
python3 generate_real_demo_data.py --max_nodes 100
```

#### ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶ç»“æž„

```json
{
  "meta": {
    "dataset": "facebook_ego",
    "ego_id": "0",
    "nodes": 50,
    "edges": 701,
    "timestamp": "2026-01-03T12:00:00"
  },
  "graph": {
    "nodes": [
      {"id": 128, "degree": 22, "attribute": "A", "known": true},
      ...
    ],
    "links": [
      {"source": 128, "target": 256, "value": 1},
      ...
    ]
  },
  "animations": {
    "greedy": [...],           // è´ªå¿ƒåŒ¹é…æ­¥éª¤
    "hungarian": [...],        // åŒˆç‰™åˆ©ç®—æ³•æ­¥éª¤
    "graph_kernel": [...],     // å›¾æ ¸æ–¹æ³•æ­¥éª¤
    "deepwalk": [...],         // DeepWalkæ­¥éª¤
    "neighbor_voting": [...],  // é‚»å±…æŠ•ç¥¨æ­¥éª¤
    "label_propagation": [...] // æ ‡ç­¾ä¼ æ’­æ­¥éª¤
  }
}
```

#### éªŒè¯ç”Ÿæˆçš„æ•°æ®

```bash
# æ£€æŸ¥æ•°æ®æ–‡ä»¶
python3 << 'EOF'
import json

with open('results/real_data_demo.json') as f:
    data = json.load(f)
    
print(f"èŠ‚ç‚¹æ•°: {len(data['graph']['nodes'])}")
print(f"è¾¹æ•°: {len(data['graph']['links'])}")
print(f"åŠ¨ç”»æ–¹æ³•: {list(data['animations'].keys())}")
print(f"æ—¶é—´æˆ³: {data['meta']['timestamp']}")
EOF
```

#### åœ¨æ¼”ç¤ºé¡µé¢ä¸­ä½¿ç”¨

ç”Ÿæˆæ•°æ®åŽï¼Œåˆ·æ–°æ¼”ç¤ºé¡µé¢å³å¯çœ‹åˆ°æ–°æ•°æ®ï¼š

```bash
cd results
python3 -m http.server 9000
# è®¿é—®: http://localhost:9000/animated_attack_demo.html
```

**æ³¨æ„**: 
- èŠ‚ç‚¹æ•°å»ºè®®æŽ§åˆ¶åœ¨50-100ä¹‹é—´ï¼Œè¿‡å¤šä¼šå½±å“å¯è§†åŒ–æ€§èƒ½
- ç”Ÿæˆå¤§è§„æ¨¡ç½‘ç»œæ•°æ®æ—¶ï¼ŒDeepWalkè®­ç»ƒå¯èƒ½éœ€è¦1-2åˆ†é’Ÿ

---

## ðŸ“ é¡¹ç›®ç»“æž„

```
Anonymous/
â”œâ”€â”€ results/
â”‚   â”œâ”€â”€ animated_attack_demo.html    â­ ä¸»æ¼”ç¤ºé¡µé¢
â”‚   â”œâ”€â”€ real_data_demo.json          â­ æ¼”ç¤ºæ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ test_highlight.html          â­ æµ‹è¯•é¡µé¢
â”‚   â”œâ”€â”€ figures/                     # å®žéªŒç»“æžœå›¾è¡¨
â”‚   â””â”€â”€ unified/                     # å®žéªŒç»“æžœæ•°æ®
â”‚
â”œâ”€â”€ main_experiment_unified.py       â­ ç»Ÿä¸€å®žéªŒå…¥å£
â”œâ”€â”€ generate_real_demo_data.py       â­ æ•°æ®ç”Ÿæˆè„šæœ¬
â”‚
â”œâ”€â”€ attack/                          # æ”»å‡»ç®—æ³•å®žçŽ°
â”‚   â”œâ”€â”€ baseline_match.py            # åŸºç¡€åŒ¹é…ç®—æ³•
â”‚   â”œâ”€â”€ embedding_match.py           # åŸºäºŽåµŒå…¥çš„åŒ¹é…
â”‚   â”œâ”€â”€ attribute_inference.py       # å±žæ€§æŽ¨æ–­
â”‚   â””â”€â”€ graphsage_attribute_inference.py  # GraphSAGEæŽ¨æ–­
â”‚
â”œâ”€â”€ defense/                         # é˜²å¾¡æœºåˆ¶å®žçŽ°
â”‚   â”œâ”€â”€ differential_privacy.py      # å·®åˆ†éšç§
â”‚   â”œâ”€â”€ k_anonymity.py               # k-åŒ¿ååŒ–
â”‚   â””â”€â”€ graph_reconstruction.py      # å›¾é‡æž„
â”‚
â”œâ”€â”€ models/                          # å›¾å­¦ä¹ æ¨¡åž‹
â”‚   â”œâ”€â”€ deepwalk.py                  # DeepWalkå®žçŽ°
â”‚   â”œâ”€â”€ graphsage.py                 # GraphSAGEå®žçŽ°
â”‚   â”œâ”€â”€ mgn.py                       # MGNæ¶ˆæ¯ä¼ é€’ç½‘ç»œå®žçŽ°
â”‚   â””â”€â”€ feature_extractor.py         # ç‰¹å¾æå–
â”‚
â”œâ”€â”€ preprocessing/                   # æ•°æ®é¢„å¤„ç†
â”‚   â”œâ”€â”€ anonymizer.py                # å›¾åŒ¿ååŒ–
â”‚   â””â”€â”€ graph_builder.py             # å›¾æž„å»º
â”‚
â”œâ”€â”€ utils/                           # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ metrics.py                   # è¯„ä¼°æŒ‡æ ‡
â”‚   â””â”€â”€ config.py                    # é…ç½®ç®¡ç†
â”‚
â”œâ”€â”€ data/                            # æ•°æ®é›†
â”‚   â””â”€â”€ datasets/
â”‚       â”œâ”€â”€ facebook/                # Facebook Egoç½‘ç»œ
â”‚       â””â”€â”€ cora/                    # Coraå¼•ç”¨ç½‘ç»œ
â”‚
â”œâ”€â”€ old_scripts/                     # æ—§ç‰ˆæœ¬ä»£ç ï¼ˆå½’æ¡£ï¼‰
â”œâ”€â”€ README.md                        # æœ¬æ–‡æ¡£
â””â”€â”€ requirements.txt                 # ä¾èµ–åˆ—è¡¨
```

---

## ðŸ§® ç®—æ³•è¯´æ˜Ž

### åŽ»åŒ¿ååŒ–æ”»å‡»

#### 1. è´ªå¿ƒç‰¹å¾åŒ¹é…
- **åŽŸç†**: åŸºäºŽèŠ‚ç‚¹åº¦æ•°ã€èšç±»ç³»æ•°ç­‰ç‰¹å¾è®¡ç®—ç›¸ä¼¼åº¦
- **æ­¥éª¤**: è´ªå¿ƒåœ°é€‰æ‹©ç›¸ä¼¼åº¦æœ€é«˜çš„èŠ‚ç‚¹å¯¹
- **ä¼˜ç‚¹**: ç®€å•é«˜æ•ˆï¼Œå‡†ç¡®çŽ‡è¾ƒé«˜
- **ç¼ºç‚¹**: å±€éƒ¨æœ€ä¼˜ï¼Œå¯èƒ½é”™è¿‡å…¨å±€æœ€ä¼˜è§£

#### 2. åŒˆç‰™åˆ©ç®—æ³•
- **åŽŸç†**: å°†å›¾åŒ¹é…é—®é¢˜è½¬æ¢ä¸ºäºŒåˆ†å›¾æœ€å¤§æƒåŒ¹é…
- **æ­¥éª¤**: æž„å»ºç›¸ä¼¼åº¦çŸ©é˜µï¼Œåº”ç”¨åŒˆç‰™åˆ©ç®—æ³•æ±‚è§£
- **ä¼˜ç‚¹**: å…¨å±€æœ€ä¼˜è§£
- **ç¼ºç‚¹**: O(nÂ³)æ—¶é—´å¤æ‚åº¦ï¼Œå¤§è§„æ¨¡å›¾è¾ƒæ…¢

#### 3. å›¾æ ¸æ–¹æ³•
- **åŽŸç†**: ä½¿ç”¨Weisfeiler-Lehmanæ ¸æå–å­å›¾ç‰¹å¾
- **æ­¥éª¤**: è¿­ä»£æ›´æ–°èŠ‚ç‚¹æ ‡ç­¾ï¼Œè®¡ç®—å­å›¾ç›¸ä¼¼åº¦
- **ä¼˜ç‚¹**: è€ƒè™‘å±€éƒ¨ç»“æž„ä¿¡æ¯
- **ç¼ºç‚¹**: è®¡ç®—å¤æ‚åº¦é«˜

#### 4. DeepWalkåµŒå…¥
- **åŽŸç†**: éšæœºæ¸¸èµ° + Skip-gramæ¨¡åž‹å­¦ä¹ èŠ‚ç‚¹åµŒå…¥
- **æ­¥éª¤**: ç”Ÿæˆéšæœºæ¸¸èµ°åºåˆ—ï¼Œè®­ç»ƒåµŒå…¥ï¼Œè®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
- **ä¼˜ç‚¹**: æ•èŽ·å›¾çš„å…¨å±€ç»“æž„
- **ç¼ºç‚¹**: éœ€è¦å¤§é‡æ¸¸èµ°æ ·æœ¬

### å±žæ€§æŽ¨æ–­

#### 1. é‚»å±…æŠ•ç¥¨
- **åŽŸç†**: ç»Ÿè®¡é‚»å±…èŠ‚ç‚¹çš„å±žæ€§ï¼Œé€‰æ‹©å¤šæ•°ç±»
- **å…¬å¼**: `attr(v) = argmax(Counter([attr(u) for u in N(v)]))`
- **ä¼˜ç‚¹**: ç®€å•ç›´è§‚ï¼Œè®¡ç®—å¿«é€Ÿ
- **ç¼ºç‚¹**: ä»…è€ƒè™‘1-hopé‚»å±…

#### 2. æ ‡ç­¾ä¼ æ’­
- **åŽŸç†**: è¿­ä»£å¼ä¼ æ’­å·²çŸ¥æ ‡ç­¾åˆ°æœªçŸ¥èŠ‚ç‚¹
- **å…¬å¼**: `Y(t+1) = D^(-1/2) A D^(-1/2) Y(t)`
- **ä¼˜ç‚¹**: è€ƒè™‘å¤šè·³é‚»å±…ä¿¡æ¯
- **ç¼ºç‚¹**: å¯èƒ½æ”¶æ•›æ…¢æˆ–æŒ¯è¡

#### 3. GraphSAGE
- **åŽŸç†**: å›¾ç¥žç»ç½‘ç»œï¼Œé‡‡æ ·å’Œèšåˆé‚»å±…ç‰¹å¾
- **æ­¥éª¤**: å¤šå±‚é‚»å±…é‡‡æ · â†’ èšåˆ â†’ æ›´æ–°
- **ä¼˜ç‚¹**: ç«¯åˆ°ç«¯å­¦ä¹ ï¼Œå‡†ç¡®çŽ‡é«˜
- **ç¼ºç‚¹**: éœ€è¦è®­ç»ƒï¼Œè®¡ç®—èµ„æºè¦æ±‚é«˜

#### 4. MGN (Message Passing Graph Network)
- **åŽŸç†**: æ¶ˆæ¯ä¼ é€’å›¾ç¥žç»ç½‘ç»œï¼ŒåŒæ—¶å­¦ä¹ èŠ‚ç‚¹å’Œè¾¹çš„è¡¨ç¤º
- **æ­¥éª¤**: ç¼–ç èŠ‚ç‚¹å’Œè¾¹ç‰¹å¾ â†’ å¤šå±‚æ¶ˆæ¯ä¼ é€’ â†’ è§£ç è¾“å‡º
- **ä¼˜ç‚¹**: è€ƒè™‘è¾¹ç‰¹å¾ï¼Œæ³›åŒ–èƒ½åŠ›å¼ºï¼Œåœ¨ç®€å•ä»»åŠ¡ä¸Šå‡†ç¡®çŽ‡å¯è¾¾95%+
- **ç¼ºç‚¹**: éœ€è¦è®­ç»ƒï¼Œå¯¹è¾¹ç‰¹å¾æ•æ„Ÿ

### é˜²å¾¡æœºåˆ¶

#### 1. å·®åˆ†éšç§
- **åŽŸç†**: æ·»åŠ æ»¡è¶³å·®åˆ†éšç§çš„Laplaceå™ªå£°
- **æ–¹æ³•**: éšæœºå¢žåˆ è¾¹ï¼Œå™ªå£°é‡ç”±ÎµæŽ§åˆ¶
- **æ•ˆæžœ**: Îµè¶Šå°ï¼Œéšç§ä¿æŠ¤è¶Šå¼ºï¼Œä½†å›¾æ•ˆç”¨é™ä½Ž

#### 2. k-åŒ¿ååŒ–
- **åŽŸç†**: ç¡®ä¿è‡³å°‘kä¸ªèŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„åº¦æ•°
- **æ–¹æ³•**: æ·»åŠ æˆ–åˆ é™¤è¾¹æ¥è°ƒæ•´åº¦æ•°åºåˆ—
- **æ•ˆæžœ**: kè¶Šå¤§ï¼Œéšç§ä¿æŠ¤è¶Šå¼º

#### 3. å™ªå£°æ³¨å…¥
- **åŽŸç†**: æ·»åŠ è™šå‡èŠ‚ç‚¹å’Œè¾¹æ¥æ··æ·†æ”»å‡»è€…
- **æ–¹æ³•**: éšæœºç”Ÿæˆå‡èŠ‚ç‚¹å’Œå‡è¾¹
- **æ•ˆæžœ**: å™ªå£°æ¯”ä¾‹è¶Šé«˜ï¼Œæ”»å‡»å‡†ç¡®çŽ‡è¶Šä½Ž

---

## ðŸ“Š å®žéªŒç»“æžœ

### Facebook Egoç½‘ç»œï¼ˆego_id=0, 333èŠ‚ç‚¹ï¼Œ2519è¾¹ï¼‰

#### åŽ»åŒ¿ååŒ–æ”»å‡»æˆåŠŸçŽ‡

| æ–¹æ³• | å‡†ç¡®çŽ‡ | P@5 | P@10 | MRR |
|------|--------|-----|------|-----|
| è´ªå¿ƒåŒ¹é… | **33.6%** | 71.8% | 80.5% | 0.499 |
| åŒˆç‰™åˆ©ç®—æ³• | 30.0% | 70.0% | 80.0% | 0.475 |
| å›¾æ ¸æ–¹æ³• | 20.0% | 50.0% | 60.0% | 0.300 |
| DeepWalk | 30.0% | 70.0% | 80.0% | 0.475 |

#### å±žæ€§æŽ¨æ–­å‡†ç¡®çŽ‡

| æ–¹æ³• | å‡†ç¡®çŽ‡ | F1åˆ†æ•° | å¬å›žçŽ‡ |
|------|--------|--------|--------|
| é‚»å±…æŠ•ç¥¨ | 65% | 0.62 | 0.60 |
| æ ‡ç­¾ä¼ æ’­ | 70% | 0.68 | 0.67 |
| GraphSAGE | **75%** | **0.73** | **0.71** |
| MGN | **95%** (Feat) | **0.94** | **0.93** |

**æ³¨**: MGNåœ¨ç®€å•äºŒåˆ†ç±»ä»»åŠ¡ï¼ˆFeatï¼‰ä¸Šè¡¨çŽ°ä¼˜å¼‚ï¼Œåœ¨å¤šæ ‡ç­¾ä»»åŠ¡ï¼ˆCirclesï¼‰ä¸Šä¸ŽGraphSAGEç›¸å½“ã€‚

#### é˜²å¾¡æ•ˆæžœ

| é˜²å¾¡æ–¹æ³• | å‚æ•° | æ”»å‡»å‡†ç¡®çŽ‡ | ä¸‹é™å¹…åº¦ |
|----------|------|-----------|----------|
| åŽŸå§‹å›¾ | - | 33.6% | - |
| å·®åˆ†éšç§ | Îµ=0.5 | 17% | **-16.6%** |
| å·®åˆ†éšç§ | Îµ=1.0 | 24% | -9.6% |
| k-åŒ¿ååŒ– | k=3 | 20% | -13.6% |
| å™ªå£°æ³¨å…¥ | 10% | 25% | -8.6% |

### å…³é”®å‘çŽ°

1. **æ”»å‡»æœ‰æ•ˆæ€§**: å³ä½¿åœ¨åŒ¿ååŒ–åŽï¼Œä»æœ‰30%+çš„èŠ‚ç‚¹å¯è¢«è¯†åˆ«
2. **ç»“æž„æŒ‡çº¹**: èŠ‚ç‚¹çš„å±€éƒ¨ç»“æž„ç‰¹å¾ï¼ˆåº¦æ•°ã€é‚»å±…ï¼‰æ˜¯ä¸»è¦æ³„éœ²æº
3. **é˜²å¾¡æƒè¡¡**: éšç§ä¿æŠ¤è¶Šå¼ºï¼Œå›¾çš„æ•ˆç”¨ï¼ˆå¦‚èšç±»ç³»æ•°ã€è¿žé€šæ€§ï¼‰è¶Šä½Ž
4. **å±žæ€§æ³„éœ²**: åŸºäºŽå›¾ç»“æž„å¯ä»¥é«˜å‡†ç¡®çŽ‡æŽ¨æ–­èŠ‚ç‚¹å±žæ€§

---

## ðŸ”— æ•°æ®é›†è¯¦ç»†è¯´æ˜Ž

### Facebook Egoç½‘ç»œ

#### æ•°æ®æ¥æº
- **æ¥æº**: Stanford SNAP (Stanford Network Analysis Project)
- **ä¸‹è½½åœ°å€**: https://snap.stanford.edu/data/ego-Facebook.html
- **å¼•ç”¨**: J. McAuley and J. Leskovec. Learning to Discover Social Circles in Ego Networks. NIPS, 2012.

#### æ•°æ®é›†ç‰¹ç‚¹
- **10ä¸ªEgoç½‘ç»œ**: ä»ŽFacebookç”¨æˆ·ä¸­å¿ƒé‡‡æ ·çš„å­å›¾
- **çœŸå®žç¤¾äº¤å…³ç³»**: åæ˜ çœŸå®žçš„æœ‹å‹å…³ç³»
- **Circleä¿¡æ¯**: åŒ…å«ç¤¾äº¤åœˆå­ï¼ˆå¦‚å®¶äººã€åŒå­¦ã€åŒäº‹ï¼‰æ ‡æ³¨
- **èŠ‚ç‚¹ç‰¹å¾**: åŒ…å«åŒ¿ååŒ–çš„ç”¨æˆ·ç‰¹å¾å‘é‡

#### è¯¦ç»†ç»Ÿè®¡

| Ego ID | èŠ‚ç‚¹æ•° | è¾¹æ•° | å¹³å‡åº¦ | èšç±»ç³»æ•° | æŽ¨èç”¨é€” |
|--------|--------|------|--------|----------|----------|
| **0** | 333 | 2519 | 15.13 | 0.606 | â­ é»˜è®¤æ¼”ç¤º |
| **107** | 1034 | 26749 | 51.76 | 0.515 | å¤§è§„æ¨¡æµ‹è¯• |
| **348** | 224 | 6384 | 56.96 | 0.591 | ç¨ å¯†ç½‘ç»œ |
| **414** | 150 | 3386 | 45.15 | 0.575 | ä¸­å°è§„æ¨¡ |
| **686** | 168 | 3312 | 39.43 | 0.611 | ä¸­å°è§„æ¨¡ |
| **698** | 65 | 1134 | 34.89 | 0.523 | â­ å¿«é€Ÿæµ‹è¯• |
| **1684** | 786 | 28048 | 71.37 | 0.523 | è¶…å¤§è§„æ¨¡ |
| **1912** | 747 | 60050 | 160.76 | 0.624 | â­ è¶…ç¨ å¯†ç½‘ç»œ |
| **3437** | 534 | 9726 | 36.44 | 0.554 | ä¸­ç­‰è§„æ¨¡ |
| **3980** | 52 | 292 | 11.23 | 0.443 | â­ æœ€å°ç½‘ç»œ |

#### æ–‡ä»¶ç»“æž„

```
data/datasets/facebook/
â”œâ”€â”€ 0.edges          # è¾¹åˆ—è¡¨æ–‡ä»¶
â”œâ”€â”€ 0.feat           # èŠ‚ç‚¹ç‰¹å¾ï¼ˆåŒ¿ååŒ–ï¼‰
â”œâ”€â”€ 0.circles        # ç¤¾äº¤åœˆå­æ ‡æ³¨
â”œâ”€â”€ 0.featnames      # ç‰¹å¾åç§°
â”œâ”€â”€ 0.egofeat        # EgoèŠ‚ç‚¹ç‰¹å¾
â”œâ”€â”€ 107.edges        # å…¶ä»–egoç½‘ç»œ...
â”œâ”€â”€ ...
â””â”€â”€ facebook_combined.txt  # åˆå¹¶çš„å®Œæ•´ç½‘ç»œ
```

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# å¿«é€Ÿæµ‹è¯•ï¼ˆæœ€å°ç½‘ç»œï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 3980

# é»˜è®¤æ¼”ç¤ºï¼ˆä¸­ç­‰è§„æ¨¡ï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0

# åŽ‹åŠ›æµ‹è¯•ï¼ˆè¶…å¤§è§„æ¨¡ï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 1912
```

---

### Coraå¼•ç”¨ç½‘ç»œ

#### æ•°æ®æ¥æº
- **æ¥æº**: Andrew McCallum's website
- **å¼•ç”¨**: McCallum et al. "Automating the Construction of Internet Portals with Machine Learning". 2000.
- **é¢†åŸŸ**: æœºå™¨å­¦ä¹ è®ºæ–‡å¼•ç”¨ç½‘ç»œ

#### æ•°æ®é›†ç‰¹ç‚¹
- **èŠ‚ç‚¹**: 2708ç¯‡æœºå™¨å­¦ä¹ è®ºæ–‡
- **è¾¹**: 5429æ¡å¼•ç”¨å…³ç³»
- **èŠ‚ç‚¹ç‰¹å¾**: 1433ç»´ç¨€ç–è¯è¢‹å‘é‡ï¼ˆåŽ»é™¤åœç”¨è¯ï¼‰
- **æ ‡ç­¾**: 7ä¸ªç ”ç©¶é¢†åŸŸ

#### ç±»åˆ«åˆ†å¸ƒ

| ç±»åˆ« | ä¸­æ–‡å | è®ºæ–‡æ•° | å æ¯” |
|------|--------|--------|------|
| **Case_Based** | åŸºäºŽæ¡ˆä¾‹ | 298 | 11.0% |
| **Genetic_Algorithms** | é—ä¼ ç®—æ³• | 418 | 15.4% |
| **Neural_Networks** | ç¥žç»ç½‘ç»œ | 818 | 30.2% |
| **Probabilistic_Methods** | æ¦‚çŽ‡æ–¹æ³• | 426 | 15.7% |
| **Reinforcement_Learning** | å¼ºåŒ–å­¦ä¹  | 217 | 8.0% |
| **Rule_Learning** | è§„åˆ™å­¦ä¹  | 180 | 6.6% |
| **Theory** | ç†è®º | 351 | 13.0% |

#### ç½‘ç»œç»Ÿè®¡

- **å¹³å‡åº¦**: 4.01
- **æœ€å¤§åº¦**: 169
- **èšç±»ç³»æ•°**: 0.241
- **ç›´å¾„**: 19
- **å¹³å‡è·¯å¾„é•¿åº¦**: 6.31
- **è¿žé€šåˆ†é‡**: 1ä¸ªï¼ˆå…¨è¿žé€šï¼‰

#### æ–‡ä»¶ç»“æž„

```
data/datasets/cora/
â”œâ”€â”€ cora.cites       # å¼•ç”¨å…³ç³»ï¼ˆè¾¹åˆ—è¡¨ï¼‰
â”œâ”€â”€ cora.content     # è®ºæ–‡å†…å®¹ï¼ˆç‰¹å¾+æ ‡ç­¾ï¼‰
â””â”€â”€ README           # æ•°æ®è¯´æ˜Ž
```

#### æ–‡ä»¶æ ¼å¼

**cora.content**: æ¯è¡Œä¸€ç¯‡è®ºæ–‡
```
è®ºæ–‡ID  è¯1 è¯2 ... è¯1433  ç±»åˆ«æ ‡ç­¾
31336   0   0   ... 1      Neural_Networks
```

**cora.cites**: æ¯è¡Œä¸€æ¡å¼•ç”¨å…³ç³»
```
è¢«å¼•è®ºæ–‡ID  å¼•ç”¨è®ºæ–‡ID
35  1033
```

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# åŸºæœ¬æµ‹è¯•
python3 main_experiment_unified.py --dataset cora

# è°ƒæ•´ç§å­èŠ‚ç‚¹æ•°é‡ï¼ˆç”¨äºŽå±žæ€§æŽ¨æ–­ï¼‰
python3 main_experiment_unified.py --dataset cora --num_seeds 20

# æµ‹è¯•ä¸åŒé˜²å¾¡å‚æ•°
python3 main_experiment_unified.py --dataset cora --defense_epsilon 0.5 --k_value 5
```

---

### æ•°æ®é›†é€‰æ‹©å»ºè®®

#### æ ¹æ®ç ”ç©¶ç›®æ ‡é€‰æ‹©

| ç ”ç©¶ç›®æ ‡ | æŽ¨èæ•°æ®é›† | åŽŸå›  |
|----------|-----------|------|
| ç¤¾äº¤ç½‘ç»œéšç§ | Facebook Ego | çœŸå®žç¤¾äº¤å…³ç³»ç»“æž„ |
| å›¾ç¥žç»ç½‘ç»œ | Cora | æœ‰ä¸°å¯Œçš„èŠ‚ç‚¹ç‰¹å¾ |
| å¿«é€ŸéªŒè¯ | Facebook (ego_id=698) | å°è§„æ¨¡ï¼Œè¿è¡Œå¿« |
| æ€§èƒ½æµ‹è¯• | Facebook (ego_id=1912) | è¶…å¤§è§„æ¨¡ç½‘ç»œ |
| æ¼”ç¤ºå±•ç¤º | Facebook (ego_id=0) | ä¸­ç­‰è§„æ¨¡ï¼Œæ•ˆæžœå¥½ |

#### æ ¹æ®è®¡ç®—èµ„æºé€‰æ‹©

| å¯ç”¨èµ„æº | æŽ¨èé…ç½® | é¢„è®¡æ—¶é—´ |
|----------|----------|----------|
| **ä½Žé…ç½®** (2æ ¸, 4GB) | ego_id=698/3980 | <1åˆ†é’Ÿ |
| **ä¸­é…ç½®** (4æ ¸, 8GB) | ego_id=0/414 | 2-3åˆ†é’Ÿ |
| **é«˜é…ç½®** (8æ ¸, 16GB+) | ego_id=107/1912, Cora | 5-10åˆ†é’Ÿ |

#### è¿è¡Œæ•ˆçŽ‡å¯¹æ¯”

```bash
# å¿«é€Ÿæµ‹è¯•ï¼ˆ30ç§’ï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 698

# æ ‡å‡†æµ‹è¯•ï¼ˆ2åˆ†é’Ÿï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0

# å®Œæ•´æµ‹è¯•ï¼ˆ5åˆ†é’Ÿï¼‰
python3 main_experiment_unified.py --dataset cora

# åŽ‹åŠ›æµ‹è¯•ï¼ˆ10åˆ†é’Ÿ+ï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 1912
```

---

### æ•°æ®é›†åŠ è½½éªŒè¯

éªŒè¯æ•°æ®é›†æ˜¯å¦æ­£ç¡®åŠ è½½ï¼š

```python
# éªŒè¯Facebookæ•°æ®é›†
python3 << 'EOF'
from data.dataset_loader import load_facebook_ego

G = load_facebook_ego(ego_id='0')
print(f"Facebook Ego 0:")
print(f"  èŠ‚ç‚¹æ•°: {G.number_of_nodes()}")
print(f"  è¾¹æ•°: {G.number_of_edges()}")
print(f"  å¹³å‡åº¦: {sum(dict(G.degree()).values()) / G.number_of_nodes():.2f}")
EOF

# éªŒè¯Coraæ•°æ®é›†
python3 << 'EOF'
from data.dataset_loader import load_cora

G, features, labels = load_cora()
print(f"Cora:")
print(f"  èŠ‚ç‚¹æ•°: {G.number_of_nodes()}")
print(f"  è¾¹æ•°: {G.number_of_edges()}")
print(f"  ç‰¹å¾ç»´åº¦: {features.shape}")
print(f"  ç±»åˆ«æ•°: {len(set(labels.values()))}")
EOF
```

---

## ðŸ”¬ MGNé›†æˆè¯´æ˜Ž

### MGNï¼ˆMessage Passing Graph Networkï¼‰ç®€ä»‹

MGNæ˜¯ä¸€ç§å…ˆè¿›çš„å›¾ç¥žç»ç½‘ç»œæž¶æž„ï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’æœºåˆ¶åŒæ—¶å­¦ä¹ èŠ‚ç‚¹å’Œè¾¹çš„è¡¨ç¤ºï¼Œç›¸æ¯”ä¼ ç»Ÿçš„GraphSAGEæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

#### æ ¸å¿ƒç‰¹æ€§
- **è¾¹ç‰¹å¾å»ºæ¨¡**: æ˜¾å¼å­¦ä¹ è¾¹çš„è¡¨ç¤ºï¼Œä¸ä»…ä»…æ˜¯èŠ‚ç‚¹
- **æ¶ˆæ¯ä¼ é€’æœºåˆ¶**: èŠ‚ç‚¹å’Œè¾¹ä¹‹é—´åŒå‘ä¿¡æ¯äº¤äº’
- **çµæ´»çš„æž¶æž„**: å¯é…ç½®çš„éšè—å±‚æ•°å’ŒMLPå±‚æ•°

#### æ¨¡åž‹æž¶æž„

```python
MGNModel(
    node_dim=è¾“å…¥èŠ‚ç‚¹ç‰¹å¾ç»´åº¦,
    edge_dim=è¾¹ç‰¹å¾ç»´åº¦ï¼ˆé»˜è®¤1ï¼‰,
    out_dim=è¾“å‡ºç±»åˆ«æ•°,
    latent_dim=128,          # éšè—å±‚ç»´åº¦
    mgn_layers=2,            # æ¶ˆæ¯ä¼ é€’å±‚æ•°
    mlp_hidden_layers=1      # MLPéšè—å±‚æ•°
)
```

### ä½¿ç”¨æ–¹æ³•

#### 1. åœ¨å®žéªŒä¸­è‡ªåŠ¨è¿è¡ŒMGN

```bash
# å®Œæ•´å®žéªŒï¼ˆè‡ªåŠ¨åŒ…å«MGNï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode all --save

# åªæµ‹è¯•å±žæ€§æŽ¨æ–­ï¼ˆåŒ…å«MGNï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode attribute_inference --save
```

#### 2. MGNå‚æ•°é…ç½®

åœ¨ `main_experiment_unified.py` ä¸­ï¼ŒMGNä½¿ç”¨ä»¥ä¸‹é»˜è®¤å‚æ•°ï¼š

```python
mgn_results = mgn_attacker.run_attack(
    train_ratio=0.7,          # è®­ç»ƒé›†æ¯”ä¾‹ï¼ˆéšè—30%æ ‡ç­¾ï¼‰
    epochs=50,                # è®­ç»ƒè½®æ•°
    latent_dim=128,           # éšè—å±‚ç»´åº¦
    mgn_layers=2,             # æ¶ˆæ¯ä¼ é€’å±‚æ•°
    mlp_hidden_layers=1,      # MLPéšè—å±‚æ•°
    learning_rate=5e-4,       # å­¦ä¹ çŽ‡
    edge_attr_dim=1,          # è¾¹ç‰¹å¾ç»´åº¦
    device='cuda' if torch.cuda.is_available() else 'cpu'
)
```

#### 3. å•ç‹¬ä½¿ç”¨MGNè¿›è¡Œå±žæ€§æŽ¨æ–­

```python
from attack.graphsage_attribute_inference import MGNAttributeInferenceAttack
import torch

# åˆå§‹åŒ–MGNæ”»å‡»å™¨
device = 'cuda' if torch.cuda.is_available() else 'cpu'
mgn_attacker = MGNAttributeInferenceAttack(G, node_labels)

# è¿è¡Œæ”»å‡»
results = mgn_attacker.run_attack(
    train_ratio=0.7,
    epochs=50,
    device=device
)

print(f"MGNå‡†ç¡®çŽ‡: {results['accuracy']:.2%}")
print(f"F1åˆ†æ•°: {results['f1_macro']:.3f}")
```

### æ€§èƒ½å¯¹æ¯”

#### Facebook Ego-0 æ•°æ®é›†ï¼ˆéšè—30%æ ‡ç­¾ï¼‰

| æ–¹æ³• | Feat (2ç±») | Circles (23ç±») | è®­ç»ƒæ—¶é—´ |
|------|-----------|---------------|---------|
| Neighbor-Voting | 69.7% | 50.6% | <1ç§’ |
| Label-Propagation | 70.7% | 54.2% | <1ç§’ |
| GraphSAGE | **100.0%** | 53.6% | ~10ç§’ |
| **MGN** | **95.0%** | **50.0%** | ~15ç§’ |

**å…³é”®å‘çŽ°**ï¼š
- âœ… MGNåœ¨ç®€å•äºŒåˆ†ç±»ä»»åŠ¡ï¼ˆFeatï¼‰ä¸Šè¾¾åˆ°95%å‡†ç¡®çŽ‡ï¼Œä»…æ¬¡äºŽGraphSAGE
- âœ… åœ¨å¤æ‚å¤šæ ‡ç­¾ä»»åŠ¡ï¼ˆCirclesï¼‰ä¸Šä¸ŽGraphSAGEç›¸å½“
- âœ… é€šè¿‡å­¦ä¹ è¾¹ç‰¹å¾ï¼ŒMGNå…·æœ‰æ›´å¼ºçš„æ³›åŒ–èƒ½åŠ›
- âš ï¸ è®­ç»ƒæ—¶é—´ç•¥é•¿äºŽGraphSAGEï¼ˆå¤š5ç§’å·¦å³ï¼‰

### æŠ€æœ¯ç»†èŠ‚

#### MGN vs GraphSAGE å¯¹æ¯”

| ç‰¹æ€§ | GraphSAGE | MGN |
|------|-----------|-----|
| **èŠ‚ç‚¹ç‰¹å¾** | âœ… | âœ… |
| **è¾¹ç‰¹å¾** | âŒ | âœ… |
| **æ¶ˆæ¯ä¼ é€’** | å•å‘ï¼ˆèŠ‚ç‚¹â†’èŠ‚ç‚¹ï¼‰ | åŒå‘ï¼ˆèŠ‚ç‚¹â†”è¾¹ï¼‰ |
| **é€‚ç”¨åœºæ™¯** | é€šç”¨å›¾åˆ†ç±» | è¾¹ä¿¡æ¯é‡è¦çš„ä»»åŠ¡ |
| **è®­ç»ƒé€Ÿåº¦** | å¿« | ä¸­ç­‰ |
| **å†…å­˜å ç”¨** | ä½Ž | ä¸­ç­‰ |

#### MGNçš„ä¼˜åŠ¿åœºæ™¯

1. **ç¤¾äº¤ç½‘ç»œåˆ†æž**: è¾¹ä»£è¡¨ä¸åŒç±»åž‹çš„å…³ç³»ï¼ˆæœ‹å‹ã€åŒäº‹ã€å®¶äººï¼‰
2. **çŸ¥è¯†å›¾è°±**: è¾¹æœ‰æ˜Žç¡®çš„è¯­ä¹‰å…³ç³»
3. **ç”Ÿç‰©ç½‘ç»œ**: è¾¹ä»£è¡¨ä¸åŒç±»åž‹çš„ç›¸äº’ä½œç”¨
4. **äº¤é€šç½‘ç»œ**: è¾¹æœ‰è·ç¦»ã€æ—¶é—´ç­‰å±žæ€§

### ä¾èµ–å®‰è£…

MGNéœ€è¦é¢å¤–çš„PyTorch Geometricåº“ï¼š

```bash
# å®‰è£…PyTorchï¼ˆå¦‚æžœæœªå®‰è£…ï¼‰
pip install torch

# å®‰è£…PyTorch Geometric
pip install torch-geometric

# æˆ–è€…ä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt
```

### å¯è§†åŒ–MGNç»“æžœ

MGNçš„ç»“æžœä¼šè‡ªåŠ¨é›†æˆåˆ°å¯è§†åŒ–å›¾è¡¨ä¸­ï¼š

```bash
# ç”ŸæˆåŒ…å«MGNçš„å±žæ€§æŽ¨æ–­å¯¹æ¯”å›¾
python3 visualize_unified_auto.py --latest

# æŸ¥çœ‹ç”Ÿæˆçš„å›¾è¡¨
ls -lh results/figures/*_attribute_inference.png
```

åœ¨å±žæ€§æŽ¨æ–­å›¾è¡¨ä¸­ï¼ŒMGNä¼šä¸Žå…¶ä»–æ–¹æ³•ï¼ˆNeighbor-Votingã€Label-Propagationã€GraphSAGEï¼‰å¹¶æŽ’æ˜¾ç¤ºã€‚

### æ•…éšœæŽ’æŸ¥

#### é—®é¢˜1: `ModuleNotFoundError: No module named 'torch_geometric'`

**è§£å†³æ–¹æ¡ˆ**:
```bash
pip install torch-geometric
```

#### é—®é¢˜2: MGNè®­ç»ƒæ—¶GPUå†…å­˜ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¼ºåˆ¶ä½¿ç”¨CPU
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --device cpu
```

æˆ–åœ¨ä»£ç ä¸­è®¾ç½®ï¼š
```python
mgn_attacker.run_attack(device='cpu')
```

#### é—®é¢˜3: MGNç»“æžœæœªæ˜¾ç¤ºåœ¨å›¾è¡¨ä¸­

**å¯èƒ½åŽŸå› **:
1. æ²¡æœ‰è¿è¡ŒåŒ…å«å±žæ€§æŽ¨æ–­çš„æ¨¡å¼
2. MGNè®­ç»ƒå¤±è´¥ï¼ˆæ£€æŸ¥ç»ˆç«¯è¾“å‡ºï¼‰

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿ä½¿ç”¨åŒ…å«å±žæ€§æŽ¨æ–­çš„æ¨¡å¼
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode all --save
```

### ä»£ç å®žçŽ°ä½ç½®

- **MGNæ¨¡åž‹**: `models/mgn.py`
- **MGNæ”»å‡»å™¨**: `attack/graphsage_attribute_inference.py` (class `MGNAttributeInferenceAttack`)
- **å®žéªŒé›†æˆ**: `main_experiment_unified.py` (function `_test_inference_on_labels`)

### å‚è€ƒæ–‡çŒ®

MGNçš„å®žçŽ°åŸºäºŽä»¥ä¸‹è®ºæ–‡ï¼š
- Battaglia, P. W., et al. (2018). "Relational inductive biases, deep learning, and graph networks". *arXiv preprint arXiv:1806.01261*.

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæŸäº›å›¾è¡¨æ²¡æœ‰ç”Ÿæˆï¼Ÿ

**å¯èƒ½åŽŸå› **ï¼š

1. **ä½¿ç”¨äº†é”™è¯¯çš„Egoç½‘ç»œID**
   - âŒ ä½¿ç”¨äº†éžæ ‡å‡†IDï¼ˆå¦‚3890ï¼‰â†’ å¯èƒ½å›žé€€åˆ°Combinedæ•°æ®
   - âœ… ä½¿ç”¨æ ‡å‡†IDï¼ˆ0, 107, 348, 414, 686, 698, 1684, 1912, 3437, 3980ï¼‰

2. **ä½¿ç”¨äº†Facebook Combinedæ•°æ®é›†**
   - âŒ `--dataset facebook` â†’ æ²¡æœ‰èŠ‚ç‚¹å±žæ€§ï¼Œæ— æ³•è¿›è¡Œå±žæ€§æŽ¨æ–­
   - âœ… `--dataset facebook_ego --ego_id 0` â†’ æœ‰å®Œæ•´å±žæ€§æ•°æ®

3. **åªè¿è¡Œäº†éƒ¨åˆ†å®žéªŒæ¨¡å¼**
   - âŒ `--mode attack` â†’ åªæœ‰åŽ»åŒ¿ååŒ–å›¾è¡¨
   - âœ… `--mode all` â†’ åŒ…å«æ‰€æœ‰å›¾è¡¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å‘½ä»¤
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode all --save
```

### Q2: æ•°æ®é›†åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | Cora | Facebook Ego | Facebook Combined |
|------|------|--------------|-------------------|
| åŽ»åŒ¿ååŒ–æ”»å‡» | âœ… | âœ… | âœ… |
| å±žæ€§æŽ¨æ–­ï¼ˆCirclesï¼‰ | âŒ | âœ… | âŒ |
| å±žæ€§æŽ¨æ–­ï¼ˆFeatï¼‰ | âŒ | âœ… | âŒ |
| å±žæ€§æŽ¨æ–­ï¼ˆæ ‡ç­¾ï¼‰ | âœ… | âŒ | âŒ |
| é²æ£’æ€§æµ‹è¯• | âœ… | âœ… | âœ… |
| é˜²å¾¡æœºåˆ¶ | âœ… | âœ… | âœ… |
| ç”Ÿæˆå›¾è¡¨æ•° | 8-10å¼  | 8-10å¼  | 7å¼ ï¼ˆç¼ºå°‘å±žæ€§æŽ¨æ–­ï¼‰ |

### Q3: ä¸ºä»€ä¹ˆEgo 3890æ²¡æœ‰å±žæ€§æŽ¨æ–­å›¾è¡¨ï¼Ÿ

**åŽŸå› **: Ego 3890ä¸æ˜¯æ ‡å‡†Egoç½‘ç»œIDï¼Œå¯èƒ½ï¼š
- æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä»£ç å›žé€€åˆ°Combined
- æ²¡æœ‰`.feat`ã€`.circles`æ–‡ä»¶ï¼Œç¼ºå°‘å±žæ€§æ•°æ®

**è§£å†³**: ä½¿ç”¨æ ‡å‡†Egoç½‘ç»œIDï¼ˆè§ä¸Šè¡¨ï¼‰

### Q4: å®žéªŒè¿è¡Œæ—¶é—´è¿‡é•¿ï¼Ÿ

**åŠ é€Ÿæ–¹æ³•**ï¼š
```bash
# ä½¿ç”¨å°ç½‘ç»œå¿«é€Ÿæµ‹è¯•
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 698 --mode quick

# è·³è¿‡GraphSAGEï¼ˆæœ€è€—æ—¶ï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode attack --save
```

### Q5: å¦‚ä½•æŸ¥çœ‹å¯è§†åŒ–ç»“æžœï¼Ÿ

```bash
# æ–¹æ³•1: å¯è§†åŒ–æœ€æ–°ç»“æžœ
python3 visualize_unified_auto.py --latest

# æ–¹æ³•2: å¯è§†åŒ–æŒ‡å®šæ•°æ®é›†
python3 visualize_unified_auto.py --dataset facebook_ego --ego_id 0

# æ–¹æ³•3: æ‰¹é‡å¯è§†åŒ–æ‰€æœ‰ç»“æžœ
python3 visualize_all_unified.py

# æŸ¥çœ‹ç”Ÿæˆçš„å›¾è¡¨
ls -lh results/figures/*.png
```

### Q6: å†…å­˜ä¸è¶³æ€Žä¹ˆåŠžï¼Ÿ

**å»ºè®®**ï¼š
- ä½¿ç”¨å°ç½‘ç»œï¼ˆego_id=698æˆ–3980ï¼‰
- ä½¿ç”¨`--mode quick`å¿«é€Ÿæ¨¡å¼
- å…³é—­å…¶ä»–ç¨‹åºé‡Šæ”¾å†…å­˜

### Q7: å¦‚ä½•éªŒè¯æ•°æ®é›†æ˜¯å¦æ­£ç¡®åŠ è½½ï¼Ÿ

```bash
# æ£€æŸ¥JSONæ–‡ä»¶ä¸­çš„graph_stats
grep -A 10 "graph_stats" results/unified/facebook_ego_ego0_*.json

# åº”è¯¥çœ‹åˆ°ï¼š
# "has_circles": true
# "has_features": true
# "nodes": 333  (ä¸æ˜¯4039ï¼)
```

---

## ðŸ“š å‚è€ƒæ–‡çŒ®

1. Narayanan, A., & Shmatikov, V. (2009). "De-anonymizing social networks". *IEEE S&P*.
2. Perozzi, B., et al. (2014). "DeepWalk: Online learning of social representations". *KDD*.
3. Hamilton, W., et al. (2017). "Inductive representation learning on large graphs". *NIPS*.
4. Dwork, C. (2006). "Differential privacy". *ICALP*.
5. Sweeney, L. (2002). "k-anonymity: A model for protecting privacy".

---

## ðŸŽ“ è‡´è°¢

æ„Ÿè°¢AI3601å¼ºåŒ–å­¦ä¹ è¯¾ç¨‹æä¾›çš„å­¦ä¹ æœºä¼šï¼Œä»¥åŠå¼€æºç¤¾åŒºçš„NetworkXã€D3.jsç­‰ä¼˜ç§€å·¥å…·ã€‚

---

## ðŸ“§ è”ç³»æ–¹å¼

- **ä½œè€…**: HongliangLu
- **å­¦å·**: 523030910233
- **è¯¾ç¨‹**: AI3601 å¼ºåŒ–å­¦ä¹ 
- **é¡¹ç›®è·¯å¾„**: `/home/honglianglu/hdd/Anonymous/`

---

## ðŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ç”¨äºŽå­¦æœ¯ç ”ç©¶å’Œæ•™å­¦ç›®çš„ã€‚

---

---

## ðŸ“– å®Œæ•´åŠŸèƒ½æ¸…å•

### âœ… å·²å®žçŽ°åŠŸèƒ½

#### æ”»å‡»æ–¹æ³•ï¼ˆ4ç§ï¼‰
- [x] è´ªå¿ƒç‰¹å¾åŒ¹é…
- [x] åŒˆç‰™åˆ©ç®—æ³•
- [x] å›¾æ ¸æ–¹æ³•ï¼ˆWeisfeiler-Lehmanï¼‰
- [x] DeepWalkåµŒå…¥

#### å±žæ€§æŽ¨æ–­ï¼ˆ3ç§æ–¹æ³• Ã— 2ç§ç›®æ ‡ï¼‰
- [x] é‚»å±…æŠ•ç¥¨ï¼ˆCircles + Featï¼‰
- [x] æ ‡ç­¾ä¼ æ’­ï¼ˆCircles + Featï¼‰
- [x] GraphSAGEï¼ˆCircles + Featï¼‰
- [x] MGNï¼ˆCircles + Featï¼‰

#### é˜²å¾¡æœºåˆ¶ï¼ˆ3ç§ï¼‰
- [x] å·®åˆ†éšç§ï¼ˆLaplaceæœºåˆ¶ï¼‰
- [x] k-åŒ¿ååŒ–
- [x] å™ªå£°æ³¨å…¥

#### è¯„ä¼°æŒ‡æ ‡
- [x] åŽ»åŒ¿ååŒ–å‡†ç¡®çŽ‡ï¼ˆTop-1, Top-K, MRRï¼‰
- [x] å±žæ€§æŽ¨æ–­å‡†ç¡®çŽ‡ï¼ˆAccuracy, F1, Precision, Recallï¼‰
- [x] é²æ£’æ€§æµ‹è¯•ï¼ˆè¾¹ç¼ºå¤±æ¨¡æ‹Ÿï¼‰
- [x] éšç§-æ•ˆç”¨æƒè¡¡åˆ†æž

#### å¯è§†åŒ–åŠŸèƒ½
- [x] äº¤äº’å¼Webæ¼”ç¤ºç³»ç»Ÿ
- [x] 8-10å¼ é™æ€å›¾è¡¨
- [x] Circles vs Featå¯¹æ¯”å¯è§†åŒ–
- [x] ç»¼åˆæ€§èƒ½åˆ†æž
- [x] æ–¹æ³•æŽ’åå¯¹æ¯”

#### æ•°æ®é›†æ”¯æŒ
- [x] Facebook Egoç½‘ç»œï¼ˆ10ä¸ªæ ‡å‡†ç½‘ç»œï¼‰
- [x] Coraå¼•ç”¨ç½‘ç»œ
- [x] Facebook Combinedï¼ˆä»…åŽ»åŒ¿ååŒ–ï¼‰

---

## ðŸŽ¯ å¿«é€Ÿå‚è€ƒ

### æœ€å¸¸ç”¨å‘½ä»¤

```bash
# 1. å®Œæ•´å®žéªŒï¼ˆæŽ¨èï¼‰
python3 main_experiment_unified.py --dataset facebook_ego --ego_id 0 --mode all --save

# 2. å¯è§†åŒ–ç»“æžœ
python3 visualize_unified_auto.py --latest

# 3. æŸ¥çœ‹æ¼”ç¤º
cd results && python3 -m http.server 9000
# è®¿é—®: http://localhost:9000/animated_attack_demo.html
```

### æ ‡å‡†Egoç½‘ç»œID

**æŽ¨èä½¿ç”¨**: `0`ï¼ˆé»˜è®¤ï¼‰ã€`698`ï¼ˆå¿«é€Ÿï¼‰ã€`1912`ï¼ˆå¤§è§„æ¨¡ï¼‰

**å®Œæ•´åˆ—è¡¨**: `0, 107, 348, 414, 686, 698, 1684, 1912, 3437, 3980`

### è¾“å‡ºæ–‡ä»¶ä½ç½®

- **JSONç»“æžœ**: `results/unified/`
- **å¯è§†åŒ–å›¾è¡¨**: `results/figures/`
- **æ¼”ç¤ºé¡µé¢**: `results/animated_attack_demo.html`
- **æ¼”ç¤ºæ•°æ®**: `results/real_data_demo.json`

---

**æœ€åŽæ›´æ–°**: 2026-01-04 | **ç‰ˆæœ¬**: v2.0 Final
