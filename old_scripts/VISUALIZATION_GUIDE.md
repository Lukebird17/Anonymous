# 🎯 图去匿名化攻击原理交互式演示系统

这是一个**教学导向的交互式可视化工具**，用于展示图去匿名化攻击和防御机制的工作原理。

## ✨ 功能特性

### 📊 四大攻击阶段可视化

1. **身份去匿名化攻击** 🎯
   - 贪心特征匹配
   - 匈牙利算法
   - 图核方法
   - DeepWalk嵌入

2. **属性推断攻击** 🏷️
   - 邻居投票
   - 标签传播
   - GraphSAGE神经网络

3. **鲁棒性测试** 🛡️
   - 边缺失影响分析

4. **防御机制** 🔒
   - 差分隐私防御

### 🎨 交互功能

- ✅ **实时图可视化** - 使用D3.js力导向布局
- ✅ **节点拖拽** - 可以手动调整节点位置
- ✅ **缩放和平移** - 支持鼠标滚轮缩放
- ✅ **节点高亮** - 自动高亮相关节点
- ✅ **工具提示** - 鼠标悬停显示节点详情
- ✅ **动画演示** - 自动播放攻击过程
- ✅ **步骤控制** - 单步执行或连续播放

## 🚀 快速开始

### 方法1: 使用启动脚本

```bash
cd Anonymous
./run_demo.sh
```

### 方法2: 手动生成

```bash
cd Anonymous
python visualize_attack_principles.py --ego_id 698
```

然后在浏览器中打开 `results/attack_principles_demo.html`

### 方法3: 使用不同的数据集

```bash
# 使用更小的网络（更快）
python visualize_attack_principles.py --ego_id 3980

# 使用更大的网络（更复杂）
python visualize_attack_principles.py --ego_id 0

# 自定义输出路径
python visualize_attack_principles.py --ego_id 698 --output my_demo.html
```

## 📖 使用指南

### 1. 选择攻击阶段

点击顶部的阶段按钮：
- 🎯 阶段1: 身份去匿名化
- 🏷️ 阶段2: 属性推断
- 🛡️ 阶段3: 鲁棒性测试
- 🔒 阶段4: 防御机制

### 2. 选择具体方法

在控制面板中选择要演示的方法（如"贪心特征匹配"）

### 3. 观看演示

- **▶️ 开始演示** - 自动播放所有步骤
- **⏭️ 下一步** - 手动逐步执行
- **🔄 重置** - 回到初始状态

### 4. 交互操作

- **拖动节点** - 点击并拖动可以调整节点位置
- **缩放视图** - 使用鼠标滚轮放大/缩小
- **平移视图** - 按住空白区域拖动
- **查看详情** - 鼠标悬停在节点上

## 🎬 演示内容说明

### 阶段1: 身份去匿名化

**目标**: 在匿名图中识别出原始节点的身份

**演示内容**:
- 左侧显示原始图，右侧显示匿名图
- 逐个展示节点匹配过程
- 高亮显示候选节点和最佳匹配
- 显示特征相似度分数

**原理展示**:
1. 计算节点的结构特征（度数、聚类系数等）
2. 在原始图和匿名图之间计算相似度矩阵
3. 为每个节点找出Top-K最相似的候选
4. 评估匹配准确性

### 阶段2: 属性推断

**目标**: 推断被隐藏的节点标签

**演示内容**:
- 已知标签节点用颜色标识
- 未知标签节点显示为灰色
- 逐步展示标签推断过程
- 显示邻居投票结果

**原理展示**:
1. **邻居投票**: 收集邻居标签，多数投票
2. **标签传播**: 迭代式传播，逐步标注
3. **GraphSAGE**: 神经网络聚合邻居特征

### 阶段3: 鲁棒性测试

**目标**: 测试攻击在数据不完整情况下的表现

**演示内容**:
- 左侧显示完整图
- 右侧显示不同缺失率的图
- 动态切换不同缺失场景
- 显示边数变化统计

**原理展示**:
- 随机移除一定比例的边
- 观察图结构的变化
- 评估攻击效果的下降

### 阶段4: 防御机制

**目标**: 展示差分隐私等防御方法

**演示内容**:
- 左侧显示原始图
- 右侧显示防御后的图
- 切换不同隐私参数ε
- 显示添加的噪声边

**原理展示**:
- 添加随机噪声边
- 删除部分真实边
- ε越小隐私保护越强
- 观察图结构的扰动

## 🎨 可视化元素说明

### 节点颜色

- 🔵 **蓝色** - 普通节点
- 🔴 **红色** - 当前选中/正在处理的节点
- 🟢 **绿色** - 匹配成功的节点
- 🟡 **黄色** - 候选节点
- 🎨 **彩色** - 不同标签的节点（属性推断阶段）

### 节点大小

节点大小与度数成正比，度数越高节点越大

### 边的样式

- 细线 - 普通边
- 粗线 - 高亮的相关边

## 📊 统计面板

底部统计卡片实时显示：
- 节点总数
- 匹配对数
- 正确匹配数
- 准确率
- 其他相关指标

## 🔧 技术栈

- **前端**: HTML5, CSS3, JavaScript
- **可视化**: D3.js v7
- **布局算法**: 力导向布局
- **后端数据生成**: Python + NetworkX
- **数据集**: Facebook Ego Networks

## 📝 数据集说明

默认使用 **Facebook Ego Network 698**:
- 61个节点
- 270条边
- 平均度: 8.85
- 适合快速演示和教学

可选择其他ego网络（参考上面的"方法3"）

## 🎓 教学建议

### 课堂演示

1. 先播放一遍自动演示，让学生看到完整流程
2. 然后使用"下一步"按钮，逐步讲解每个环节
3. 鼓励学生拖动节点，观察图的结构
4. 对比不同方法的效果差异

### 自学使用

1. 按照阶段顺序依次学习
2. 仔细阅读每个方法的算法说明
3. 观察步骤面板中的具体数值
4. 尝试在不同ego网络上运行

## 📂 文件结构

```
Anonymous/
├── visualize_attack_principles.py  # 主生成脚本
├── run_demo.sh                     # 快速启动脚本
├── VISUALIZATION_GUIDE.md          # 本文档
└── results/
    └── attack_principles_demo.html # 生成的演示文件
```

## ⚙️ 高级配置

### 修改演示速度

编辑生成的HTML文件，找到以下代码：

```javascript
playInterval = setInterval(() => {
    nextStep();
    if (currentStep >= document.querySelectorAll('.step').length) {
        stopAnimation();
    }
}, 2000);  // 修改这个数值（毫秒）
```

### 修改图布局参数

在HTML中找到力导向布局配置：

```javascript
this.simulation = d3.forceSimulation(this.data.nodes)
    .force('link', d3.forceLink(this.data.links)
        .id(d => d.index)
        .distance(50))        // 边长度
    .force('charge', d3.forceManyBody()
        .strength(-200))      // 斥力强度
    .force('center', d3.forceCenter(this.width / 2, this.height / 2))
    .force('collision', d3.forceCollide()
        .radius(20));         // 碰撞半径
```

## 🐛 常见问题

### Q: 图显示很乱，节点重叠

A: 使用鼠标滚轮缩小，或者手动拖动节点整理布局

### Q: 动画太快/太慢

A: 参考"高级配置"部分修改播放速度

### Q: 想使用更大的网络

A: 使用 `--ego_id` 参数选择其他网络，但要注意大网络可能导致浏览器卡顿

### Q: 浏览器打不开HTML

A: 确保使用现代浏览器（Chrome, Firefox, Edge等）

## 📞 反馈与改进

如有问题或改进建议，请联系项目维护者。

## 🎉 享受演示！

现在你可以：
1. 打开浏览器访问演示页面
2. 选择感兴趣的攻击方法
3. 点击"开始演示"
4. 观看算法的工作原理！

---

**提示**: 这是一个教学工具，旨在帮助理解攻击原理，而非实际攻击实现。









