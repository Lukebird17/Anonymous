<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ•°æ®åŠ è½½æµ‹è¯•</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 16px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        pre {
            background: white;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            max-height: 400px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” æ•°æ®åŠ è½½æµ‹è¯•é¡µé¢</h1>
    
    <div id="status"></div>
    
    <h2>æµ‹è¯•æ­¥éª¤ï¼š</h2>
    <ol>
        <li>æ£€æŸ¥D3.jsæ˜¯å¦åŠ è½½</li>
        <li>å°è¯•åŠ è½½real_data_demo.json</li>
        <li>æ˜¾ç¤ºæ•°æ®å†…å®¹</li>
    </ol>
    
    <h2>æµ‹è¯•ç»“æœï¼š</h2>
    <div id="results"></div>
    
    <script>
        const statusDiv = document.getElementById('status');
        const resultsDiv = document.getElementById('results');
        
        function addStatus(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            statusDiv.appendChild(div);
        }
        
        // 1. æ£€æŸ¥D3
        if (typeof d3 !== 'undefined') {
            addStatus('âœ… D3.js å·²åŠ è½½ (ç‰ˆæœ¬: ' + d3.version + ')', 'success');
        } else {
            addStatus('âŒ D3.js æœªåŠ è½½ï¼', 'error');
        }
        
        // 2. åŠ è½½æ•°æ®
        addStatus('ğŸ”„ æ­£åœ¨åŠ è½½ real_data_demo.json...', 'info');
        
        d3.json('real_data_demo.json')
            .then(data => {
                addStatus('âœ… æ•°æ®åŠ è½½æˆåŠŸï¼', 'success');
                
                // æ˜¾ç¤ºæ•°æ®æ¦‚è§ˆ
                const overview = `
æ•°æ®é›†: ${data.meta.dataset}
Ego ID: ${data.meta.ego_id}
èŠ‚ç‚¹æ•°: ${data.meta.nodes}
è¾¹æ•°: ${data.meta.edges}
æ—¶é—´æˆ³: ${data.meta.timestamp}
                `;
                
                const pre = document.createElement('pre');
                pre.textContent = 'æ•°æ®æ¦‚è§ˆ:\n' + overview;
                resultsDiv.appendChild(pre);
                
                // æ˜¾ç¤ºèŠ‚ç‚¹æ ·æœ¬
                const nodeSample = data.graph.nodes.slice(0, 3);
                const pre2 = document.createElement('pre');
                pre2.textContent = 'èŠ‚ç‚¹æ ·æœ¬ (å‰3ä¸ª):\n' + JSON.stringify(nodeSample, null, 2);
                resultsDiv.appendChild(pre2);
                
                // æ˜¾ç¤ºåŠ¨ç”»æ•°æ®
                const animInfo = `
è´ªå¿ƒæ­¥éª¤: ${data.animations.greedy?.length || 0}
éšæœºæ¸¸èµ°: ${data.animations.deepwalk?.walks?.length || 0}
å±æ€§æ¨æ–­: ${data.animations.attribute_inference?.length || 0}
                `;
                const pre3 = document.createElement('pre');
                pre3.textContent = 'åŠ¨ç”»æ•°æ®:\n' + animInfo;
                resultsDiv.appendChild(pre3);
                
                console.log('å®Œæ•´æ•°æ®:', data);
            })
            .catch(err => {
                addStatus('âŒ æ•°æ®åŠ è½½å¤±è´¥: ' + err.message, 'error');
                
                const pre = document.createElement('pre');
                pre.textContent = 'é”™è¯¯è¯¦æƒ…:\n' + err.stack;
                resultsDiv.appendChild(pre);
                
                console.error('åŠ è½½é”™è¯¯:', err);
            });
    </script>
</body>
</html>
